---
title: "第十回: 辞書に関数を入れる"
layout: page
---

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/codemirror.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/codemirror.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/mode/javascript/javascript.js"></script>
<style>
    .CodeMirror { height: auto; border: 1px solid #ddd; }
    .console { border: 1px solid #333; color: rgb(48, 68, 216); padding: 0px 5px 0px 5px; }

    .answer {color: red;  }
    .hideanswer { display: none; }
    .result {font-size: large;}
    .wrong {color: red;  }
    .correct {color: rgb(0, 89, 255);  }



    .column{
        padding: 0.5em 1em;
        margin: 2em 0;
        color: #5d627b;
        background: white;
        border-top: solid 5px #5d627b;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.22);
    }    
</style>
<link rel="stylesheet" href="https://rawgit.com/karino2/js-introduction/master/scripts/smoke.css" />
<script src="https://rawgit.com/karino2/js-introduction/master/scripts/smoke.min.js"></script>                    
<script src="https://neil.fraser.name/software/JS-Interpreter/acorn_interpreter.js"></script>

<script type="text/javascript" src="https://rawgit.com/karino2/js-introduction/master/scripts/env.js"></script>



<script>
var questions = [];


document.body.onload = function() {
  initInterpreter();


  setupAllREPL2(3);
  setupAllQuestionsWithScnario(questions);
}
</script>


第七、八、九回と三回に渡って関数をやってきました。

第十回では、その関数を辞書に入れる、という話をします。
辞書は[第六回](ch6.md)でやった辞書です。

関数についてはもうやってきたし、辞書に入れるのは、見た目はゴテゴテしているけれど、数字や文字を入れるのと変わらないので、[第六回](ch6.md)の内容と同じです。
ただ、見た目がゴテゴテするので、それに慣れる為にも少し説明をしていきたいと思います。

また、一つだけ関数が文字や数字と違う所があります。
それは関数は辞書に入れると、`this`という特殊な変数の意味が変わる、という不思議な現象があります。

どう変わるかを一言で言えば「`this`が、自身が入っている辞書を表す」というのがその内容なのですが、
そのことについて説明していきます。

# 関数を辞書に入れよう

JavaScriptでは、ある程度プログラムが大きくなってきたら、関連する関数を辞書に入れて使うのが一般的です。
このシリーズでもプレーヤーにボタンを押させる物は`MessageBox`という辞書に入れてあります。

そこで自分で作る関数も辞書に入れてみたいと思います。

## 「むぇーー」という関数を辞書に入れる

実際にやってみましょう。
例えば以下のような関数があったとします。

<div id="ex1">
<input type="button" value="実行" />
<textarea>
var naku = function() {
   MessageBox.show("むぇーー");
};

naku();</textarea>
<b>結果:</b> <span class="console"></span><br>
</div>
  
　  
あとの都合の為に関数名だけ鳴くということで`naku`になっていますが、
他は今となっては説明は要らないでしょう。

これをawaという辞書に入れたいとします。

### 辞書の復習

[第六回](ch6.md)の内容を簡単に復習しておきます。
結構前の話なので、以下を読んで忘れているな、と思った人は第六回や、[第6.2回: 辞書100本ノック！](6_2.md)や[第6.3回: 辞書と配列混合、100本ノック！](6_3.md)の最初の方をやり直すなどしてみて下さい。（今回はそんな難しいのは使いません）

辞書というのは、以下のように書く物でした。

```
var awa = {};
awa["toot数"] = 41030;
awa["フォロー数"] = 145;
awa["フォロワー数"] = 230;
```

また、例えば以下のようにキーをローマ字にすれば、

```
var awa = {};
awa["toots"] = 41030;
awa["follows"] = 145;
awa["follower"] = 230;
```

以下のように書いたり出来る、という話もありました。

```
var awa = {};
awa.toots = 41030;
awa.follows = 145;
awa.follower = 230;
```

この機能は第六回ではあまり使わなかったので忘れているかもしれませんが、今回は良く使うのでここで思い出しておきましょう。

また、最初から、以下のように書いても同じ事でした。

```
var awa = {
toots: 41030,
follows: 145,
follower: 230
};
```

さらに、配列をもたせる事も出来る、という話をしました。

```
var awa = {
toots: 41030,
follows: 145,
follower: 230,
nakigoe: ["むぇーー", "コケー", "ごあーん"]
};
```

こんな感じですね。
最後は、以下のようにも書けます。

```
var awa = {};
awa.toots = 41030;
awa.follows = 145;
awa.followers = 230;
awa.nakigoe = ["むぇーー", "コケー", "ごあーん"];
```

今回使うのはこの位です。
今回の内容は今回の内容よりもむしろこの第六回の内容が難しい、という回になりそうです。
詰まったら第六回復習、という感じでお願いします。

### 辞書に関数を入れよう。

で、この辞書に、以下の関数を入れてみよう、というのが今回のテーマです。

```
var naku = function() {
   MessageBox.show("むぇーー");
};
```

先程の配列とかを置いてある場所を、この関数に置き換えればいい訳です。
例えば以下のようになります。

```
var awa = {};
awa.toots = 41030;
awa.follows = 145;
awa.followers = 230;
awa.naku = function() {
   MessageBox.show("むぇーー");
};
```

### TODO: 図解

nakuの所を、`awa.naku = ["むぇー"]`などの代わりに`awa.naku = function() {...};`としている訳です。（...は中略って意味で書いてます）。


なお、同じコードをこう書いても構いません。


```
var awa = {
toots: 41030,
follows: 145,
follower: 230,
naku: function() {
   MessageBox.show("むぇーー");
  }
};
```

これで辞書に、`naku`をキーとして関数を入れる事が出来ました。

呼ぶ時は`awa.naku()`とやると呼ぶ事が出来ます。やってみましょう。

<div id="ex2">
<input type="button" value="実行" />
<textarea>
var awa = {
toots: 41030,
follows: 145,
follower: 230,
naku: function() {
   MessageBox.show("むぇーー");
  }
};

awa.naku();</textarea>
<b>結果:</b> <span class="console"></span><br>
</div>
  
　  
複数の関数を入れるとこんな感じになります。

<div id="ex3">
<input type="button" value="実行" />
<textarea>
var kumosaba = {
  awa: function() {
     MessageBox.show("むぇーー");
  },
  lucy: functin() {
     MessageBox.show("しゅるしゅるする");
  }
};

kumosaba.lucy();
kumosaba.awa();</textarea>
<b>結果:</b> <span class="console"></span><br>
</div>
  
　  
以上で今回のテーマの前半、関数を辞書に入れる、という事が出来ました。


### TODO: 課題


# thisという名の変な奴

関数を辞書に入れると、`this`というのが入っている辞書を表すようになります。
これは凄く変な振る舞いをする特別な奴なので、ここで説明しておきます。

`this`は少し入門からははみ出して中級編の話題と思いますし、
プラグインを書く時には最初のうちは理解してなくても問題無いと思いますが、
一つ上へのステップに進む時のとっかかりのためにも簡単に説明しておきます（そんな難しくも無いので）。





**コラム**  
ひとつめ。  
　  
二つ目。
{: .column}
