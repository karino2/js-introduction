---
title: "第六回: 辞書"
layout: page
---

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/codemirror.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/codemirror.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.35.0/mode/javascript/javascript.js"></script>
<style>
    .CodeMirror { height: auto; border: 1px solid #ddd; }
    .console { border: 1px solid #333; color: rgb(48, 68, 216); padding: 0px 5px 0px 5px; }

    .answer {color: red;  }
    .hideanswer { display: none; }
    .result {font-size: large;}
    .wrong {color: red;  }
    .correct {color: rgb(0, 89, 255);  }



    .column{
        padding: 0.5em 1em;
        margin: 2em 0;
        color: #5d627b;
        background: white;
        border-top: solid 5px #5d627b;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.22);
    }    
</style>
<link rel="stylesheet" href="https://rawgit.com/karino2/js-introduction/master/scripts/smoke.css" />
<script src="https://rawgit.com/karino2/js-introduction/master/scripts/smoke.min.js"></script>                    
<script src="https://neil.fraser.name/software/JS-Interpreter/acorn_interpreter.js"></script>

<script type="text/javascript" src="https://rawgit.com/karino2/js-introduction/master/scripts/env.js"></script>



<script>
var questions = [];


document.body.onload = function() {
  myInterpreter = new Interpreter('MessageBox = {show: SmokeAlert, yesNo: SmokeYesNo}; Math = {randomInt: _randomInt};',initFunc);
  scenarioPlayer = new Interpreter('MessageBox = {show: SmokeAlert, yesNo: SmokeYesNo};  Math = {randomInt: _randomInt};', initScnearioPlayerFunc);


  setupAllREPL2(1);
  setupAllQuestionsWithScnario(questions);
}
</script>


第六回は辞書とjsonです。
辞書はツクールとかだとあまり使う機会が無いと思うのですが、
プラグインが辞書で出来ているので説明しておこうと思います。

面倒な割にはあまり使い道が無い、残念な回です。グレンラガンで言うと温泉回、ビバップで言う所の冷蔵庫回みたいなもんです。

ではいってみましょう。

# 辞書って何よ？

`配列`は、`要素`を数字で取り出す物です。例えば`hairetu[3]`とかやります。

`辞書`は、`要素`を文字で取り出す物です。例えば`jisyo["hogehoge"]`とかやります。

「あー、そういうことね、完全に理解した」

と思ったらここで終えても良いのですが、もうちょっと細かい話もしていきましょう。

## 何はともあれ実際の使い方

まずは細かい説明の前に、実際の使い方を見て雰囲気をつかみ、その後説明をしていきます。
では行きましょう。

空（カラって読んでね）の`辞書`は、`{}`で作ります。以下のようなコードです。

```
var nakigoe = {};
```

これで中身がからっぽの、何も入ってない辞書が作れます。

### 辞書への要素の追加は`=`

コードネームはセーラーVみたいですね（若い人には通じない）。

からっぽの`辞書`には、`=`で`要素`を追加していく事が出来ます。
例えば以下みたいな感じです。

```
nakigoe["犬"] = "わんわん";
nakigoe["猫"] = "にゃーん";
nakigoe["おっさん"] = "にゃーん";
nakigoe["あじゃ"] = "むえぇ〜〜";
```

JavaScriptでは、変数の場合、`=`は、右の物を左に入れる、という意味でした。
`辞書`の場合も同じ意味で、`=`で要素を追加出来ます。

### 取り出し方は配列と同様`[]`


`要素`を取り出すには、`配列`と同様`[]`を使います。ただし、配列の場合は`hairetu[0]`とか`hairetu[1]`とかの数字でしたが、
`辞書`は文字です。

```
nakigoe["あじゃ"];
```

`要素`を表示するなら、`MessageBox.show`を使えばOK。

```
MessageBox.show(nakigoe["あじゃ"]);
```

取り出した`要素`を変数に入れる場合は、以下のような感じです。


```
var message = nakigoe["あじゃ"];
```

少し実際のコードを動かしてみましょう。


<div id="ex1">
<input type="button" value="実行" />
<textarea>
// カラの辞書を作る
var nakigoe = {};

// 要素を4つ入れる
nakigoe["犬"] = "わんわん";
nakigoe["猫"] = "にゃーん";
nakigoe["おっさん"] = "にゃーん";
nakigoe["あじゃ"] = "むえぇ〜〜";

// 「あじゃ」に入っている物を取り出して表示
MessageBox.show(nakigoe["あじゃ"]);</textarea>
<b>結果:</b> <span class="console"></span><br>
</div>
  
　  
`辞書`とはこんな感じです。
以下、このコードの細かい説明をしていきます。


## ポケモン預かりボックスと辞書

話を総合した結果、`辞書`とはポケモン預かりボックス（以下ボックスと呼ぶ）にかなり似た物だと思う。

ボックスは、たくさんのポケモンを入れる事が出来る。で、取り出す時は`ニックネーム`を指定して取り出す。
言い換えると、ボックスに`ニックネーム`を指定すると、対応した`ポケモン`が「取り出せる」

JavaScriptの`辞書`は、たくさんの文字などを入れる事が出来る。
で、取り出す時には`キー`を指定します。`辞書`に`キー`を指定すると、対応した`要素`が「取り出せる」。

`キー`というのは、要素につけたニックネームのようなもので、JavaScriptの文字です。

並べてみましょう

- 辞書 ー＞ ボックス
-  キー ー＞ ニックネーム
-  要素 ー＞ ボックスのポケモン

だいたいこういう関係になっています。

JavaScriptの`辞書`がポケモンのボックスと違うのは、同じポケモンを複数のボックスに入れられます。
また、箱ごとに別のニックネームがつけられます。

言葉にするとややこしいですね。でもまぁだいたい同じ物です。

先程のコードを、ポケモンのボックスと対応づけて見てみましょう。


### ポケモン預かりボックスで考える、`辞書`のコード

まず、カラの辞書を作る、という事をやりました。

```
// カラの辞書を作る
var nakigoe = {};
```

これは、新しいボックスを作る事に相当します。
ボックスが自由に作れる！凄い！

まぁプログラムですから。

で、`{}`とやると、中にまだ誰もいないボックスが作れる訳です。

その後、`要素`を4つ入れていました。

```
// 要素を4つ入れる
nakigoe["犬"] = "わんわん";
nakigoe["猫"] = "にゃーん";
nakigoe["おっさん"] = "にゃーん";
nakigoe["あじゃ"] = "むえぇ〜〜";
```

`=`の右側がポケモンに相当します。左側の`犬、猫、おっさん、あじゃ`はニックネームに相当します。

だから、

```
nakigoe["あじゃ"] = "むえぇ〜〜";
```

というコードは、nakigoeというボックスに、`むえぇ〜〜`という文字を入れる、その時ニックネームとして、`あじゃ`と名付ける、という意味になります。

で、このボックスから取り出すには、`nakigoe["あじゃ"]`と書く訳です。
こうすると、nakigoeというボックスの、`あじゃ`というニックネームのポケモンが取り出せます。


別に入れるポケモンは、文字じゃなくてもなんでもOKです。
たとえば前回やっった`配列`とかでもなんでもOK。

やってみましょう。こんな感じ：

```
nakigoe["モコ"] = [1, 2, 3, 4];
```

こんな風に、配列を入れたりも出来ます。これじゃぁ全然鳴き声じゃないけど。
配列以外でも、後でやる関数とかも入れられたりします。


お、ポケモンのボックス、なんかこれは分かりやすく説明出来た気がする！

## `辞書`という言葉を考える

ついでに`辞書`という言葉の意味からも考えておきましょう。

現実世界には、`辞書`という物がありますよね。
ここでは国語辞典を考えましょう。なお、紙の辞典を思い浮かべてください。
紙の辞典、もう引かなくなりましたねぇ…

ある日突然、みんなが忖度とかいう言葉を使いまくり始めたとします。
「忖度」、知らねーよ、何この単語。こういう難しい言葉流行らせるのやめろよなぁ、めんどくせー。
というかなんて読むの？そんたく？

という事で仕方ないので、`辞書`で`忖度`を`引いて`みます。
まずは「そ、そ、そ…」と「そ」で探して、次に「ん、ん、ん、」と「ん」で探して、その次に「た、た、た…」と「た」で探すと、この辺で、「そんたく」という単語が見つかります。

で、そこには「他人の心をおしはかる事」という`説明`が書いてあります。

辞書というのは、`単語`で意味の説明を`引く`物、と言えます。
プログラムにおける辞書も、これと似た振る舞いをするものです（というか似ているので辞書と呼ぶ事にしました）。

辞書を引く単語は、普通載っている説明よりは短いですよね。
この短い単語で調べて、該当箇所を見つけて、そこにある長い説明を得る、
というのが辞書という物と言えます。

なんかもってまわった言い方ですが、こう言うとプログラムの辞書と似た物になります。  
プログラムの辞書も、何かの単語でそこに紐付いた何かをとってくるものです。
プログラムの場合はその単語で引けるのが「説明」とは限らないのですが。


### 辞書は`キー`で引く

プログラムにおいては、この`引く`対象の単語を、`キー`と呼びます。これが噂の乙キーって奴ですね。
違います。

つまり、先程の例では、`忖度`がキーです。

辞書で忖度を引く事を、プログラムの用語では、

「国語辞典という`辞書`を、忖度を`キーに`して`引く`」

といいます。
先程のプログラムの例だと、`nakigoe["あじゃ"]`というコードがありました。

このコードは、

「nakigoeという`辞書`を"あじゃ"を`キー`にして`引く`」

といいます。

言葉なんてどうでもいいんですが、`辞書`と`キー`に着目すると辞書は分かりやすくなるので、この2つに注意してみてください。

なお、先程のポケモンの言葉に直すと

「nakigoeというボックスから"あじゃ"というニックネームのポケモンを出す」

という感じでしょうか。ポケモン用語、間違ってたらすみません。


### 課題: toot数を入れた辞書を作れ

とりあえず4人くらい、今見てみた数字は以下でした。
コロニキ多いね…

- コロニキ: 56125
- あじゃ: 38726
- るーしー: 15014
- ダニエル: 12518

キーは以下の文字にしましょう。

- コロニキ
- あじゃ
- るーしー
- ダニエル

で、上のtoot数を要素に入れた配列を作りましょう。

**TODO: 課題**



## カラじゃない辞書を作る

最初から中身の入った辞書を作る事も出来ます。

例えば先程の以下のコード

```
// カラの辞書を作る
var nakigoe = {};

// 要素を4つ入れる
nakigoe["犬"] = "わんわん";
nakigoe["猫"] = "にゃーん";
nakigoe["おっさん"] = "にゃーん";
nakigoe["あじゃ"] = "むえぇ〜〜";
```

は、全く同じことを、以下のように書けます。

```
var nakigoe = {"犬": "わんわん", "猫": "にゃーん", "おっさん": "にゃーん", "あじゃ": むえぇ〜〜〜"};
```

`キー`と`要素`を`:`を間に置いて、`,`で区切って並べると、最初からこれらの`キー`とそれに対応した`要素`の入った辞書が作れます。

なお、第4.5回でやった改行も`配列`と同じような感じです。

```
var nakigoe = {"犬": "わんわん",
 "猫": "にゃーん",
 "おっさん": "にゃーん", "あじゃ": むえぇ〜〜〜"};
```

こんな感じで、`,`の後で改行を入れる事も出来ます。

### `キー`がローマ字の時は、`"`は無しでもOK

キーを変数名っぽい名前にする場合、`"`無しでもOK,というルールがあります。

例えば、先程のコードの`キー`を、「inu, neko, ossan, awa」にしましょう（あじゃはawaらしいんですよね、アカウント名見ると）。

```
var nakigoe = {"inu": "わんわん",
 "neko": "にゃーん",
 "ossan": "にゃーん",
 "awa": むえぇ〜〜〜"};
```

この場合、`キー`の方のダブルクォート、つまり`"`は省略出来ます。
つまり以下のようなコードでも同じ意味になります。

```
var nakigoe = {inu: "わんわん",
 neko: "にゃーん",
 ossan: "にゃーん",
 awa: むえぇ〜〜〜"};
```


### `キー`がローマ時の時は、`.`でも要素が取り出せる

さらに、`キー`がローマ字の時は、`.`でも取り出せる、という良く分からないルールがあります。
だから、

`nakigoe["awa"]`は、`nakigoe.awa｀と書いても同じ意味になります。まぢかよ。
こんな言語、JavaScriptだけっすよ、本当…


### 課題: toot数を作れ改、今度は`"`無しで

アカウント名を使えば、ダブルクォート無しの辞書の作り方が使える気がする。
まずはtoot数を再掲。

- Lord_murmur: 56125
- awa: 38726
- shioneko: 15014
- DanBrikas: 12518

アカウント名だと誰が誰だか全然分からんね…  
まぁいいです。この`辞書`を、キーを`"`無しの記法で指定する方法で作って下さい。

** TODO: 課題 **

**`.`の課題は配列と合わせた奴で**

# json

そしてjsonです。「じぇいそん」って読みます。チェーンソーとか持ってそうですね。

JavaScriptの入門では珍しいですが、このシリーズではjsonの話もしようと思います。
ツクールMVでは、ゲームを作る時にやった操作はだいたいdataフォルダの下に、Items.jsonなどのjsonファイルとして保存される、みたいな事をどっかで見たので(本当かどうかは知りませんが）。

ツクール的にはjsonを知っておくといろいろ便利な事は多そうですし、
jsonはweb開発やそのほかのプログラムでも良く使うので、知っておいて損は無いでしょう。

という事でjsonの話をしますが、jsonは本質的には配列と辞書を入れ子にした物なので、
まずその辺の話をして、最後にjsonの話をします。


## `配列`の中に`辞書`の中に`配列`を入れる

さて、第5回でやった`配列`には、数字や文字が入れられました。
実はこの中には、さらに`配列`とか`辞書`を入れる事が出来ます。

たとえばこんな感じですね。

```
var hairetu = [1, 2, ["abc", "def"], 3, 4];
```

で、さらに`配列`の中に`辞書`を入れたり、`辞書`の中に`配列`を入れたり出来ます。

```
var iroiro = [1, 2, {a: [3, 4], b: "hoge"}, 5, 6];
```

これで全部分かった、となるならそれで終わりなんですが、`辞書`や`配列`に慣れる為の特訓の一貫として、
ちょっとゆっくりやっていきましょう。

### 配列の中に配列を入れる

まずは、配列の中に配列を入れてみます。


### 配列の中の配列や、その要素を取り出す

### 辞書の中に辞書を入れる

### 辞書の中の辞書の中の要素を取り出す

### 辞書の中に配列の中に辞書を入れて、その要素を取り出す


## json入門

### jsonとは何か

### jsonの例


### jsonから要素を取り出す

### jsonの要素を変更する





**コラム**  
一行目  
　  
二行目
{: .column}

